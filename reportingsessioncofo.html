<!doctype html>

<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <!-- Required meta tags -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Reporting sessions</title>

  <link rel="stylesheet" href="bootstrap-sncf.metier.v4.3.1-r5/bootstrap-sncf.min.css">
  <link rel="stylesheet alternate" href="bootstrap-sncf.metier.v4.3.1-r5/bootstrap-sncf.darkmode.min.css">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" type="text/css" href="jquery.dataTables.css">
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/1.6.5/css/buttons.dataTables.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/searchpanes/1.2.1/css/searchPanes.dataTables.min.css">
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/select/1.3.1/css/select.dataTables.min.css">

</head>

<body>
    <div id="includedContentCofo5"></div>

    <div class="container-fluid">
      <h1 class="text-center mb-5"> Reporting sessions </h1>

      <div class="row">
        <div class="col-md-12">
          <div class="col-md-3">
            <div class="btn-group dropdown" data-component="select-radios"></div>
              <button type="button" class="btn btn-secondary dropdown-toggle radiusBtn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" aria-controls="actionsgroup1">
              <span data-role="placeholder">Juin</span>
              <i class="icons-arrow-down" aria-hidden="true"></i>
              </button>
              <div id="actionsgroup1" class="dropdown-menu dropdown-menu-right">
                  <input data-role="value" type="radio" name="keywordSearch" value="keywordSearch1" id="action1" class="sr-only"/>
                  <label class="dropdown-item" for="action1">Janvier</label>

                  <input data-role="value" type="radio" name="keywordSearch" value="keywordSearch2" id="action2" class="sr-only"/>
                  <label class="dropdown-item" for="action2">Février</label>

                  <input data-role="value" type="radio" name="keywordSearch" value="keywordSearch3" id="action3" class="sr-only"/>
                  <label class="dropdown-item" for="action3">Mars</label>

                  <input data-role="value" type="radio" name="keywordSearch" value="keywordSearch3" id="action4" class="sr-only"/>
                  <label class="dropdown-item" for="action4">Avril</label>

                  <input data-role="value" type="radio" name="keywordSearch" value="keywordSearch3" id="action5" class="sr-only"/>
                  <label class="dropdown-item" for="action5">Mai</label>

                  <input data-role="value" type="radio" name="keywordSearch" value="keywordSearch3" id="action6" class="sr-only"/>
                  <label class="dropdown-item" for="action6">Juillet</label>

                  <input data-role="value" type="radio" name="keywordSearch" value="keywordSearch3" id="action8" class="sr-only"/>
                  <label class="dropdown-item" for="action8">Août</label>

                  <input data-role="value" type="radio" name="keywordSearch" value="keywordSearch3" id="action9" class="sr-only"/>
                  <label class="dropdown-item" for="action9">Septembre</label>

                  <input data-role="value" type="radio" name="keywordSearch" value="keywordSearch3" id="action20" class="sr-only"/>
                  <label class="dropdown-item" for="action20">Octobre</label>

                  <input data-role="value" type="radio" name="keywordSearch" value="keywordSearch3" id="action21" class="sr-only"/>
                  <label class="dropdown-item" for="action21">Novembre</label>

                  <input data-role="value" type="radio" name="keywordSearch" value="keywordSearch3" id="action22" class="sr-only"/>
                  <label class="dropdown-item" for="action22">Décembre</label>

                  <input data-role="value" type="radio" name="keywordSearch" value="keywordSearch3" id="action23" class="sr-only"/>
                  <label class="dropdown-item" for="action23">2021</label>

                  <input data-role="value" type="radio" name="keywordSearch" value="keywordSearch3" id="action24" class="sr-only"/>
                  <label class="dropdown-item" for="action24">2020</label>

                  <input data-role="value" type="radio" name="keywordSearch" value="keywordSearch3" id="action25" class="sr-only"/>
                  <label class="dropdown-item" for="action25">2019</label>
              </div>
            </div>
          </div>
          <div class="col-md-2 offset-md-10">
            <button onclick="showGraph()" class="btn btn-primary"> Afficher graphiques</button>
          </div>
        </div>
        <div class="col-md-11 mt-5 ofsset-md-1" id="graph">
          <div class="row">
            <div class="col-md-5 offset-md-2">
              <div id="container" style="width:90%; height:100%"> </div>
            </div>
            <div class="col-md-5">
              <div id="container2" style="width:90%; height:100%"> </div>
            </div>
          </div>
        </div>
        <div class="col-md-12 mt-5">
          <table class="table display" id="cofoall">
            <thead class="thead bg-secondary text-white">
              <tr>
                  <th scope="col"> Code RAF</th>
                  <th scope="col"> Libellé de l'action </th>
                  <th scope="col"> Code Session </th>
                  <th scope="col"> Lieu </th>
                  <th scope="col"> Date de début </th>
                  <th scope="col"> Date de fin </th>
                  <th scope="col"> Division métier</th>
                  <th scope="col"> Groupe </th>
                  <th scope="col"> Typologie</th>
              </tr>
            </thead>
            <tbody class="tbody">
              <tr>
                <td><div class="cell-inner text"> VC524000</div></td>
                <td><div class="cell-inner text"> Agents CAT Accès toitures engins moteurs électriques</div></td>
                <td><div class="cell-inner"> NVC0000141</div></td>
                <td><div class="cell-inner"> Nanterre</div></td>
                <td><div class="cell-inner"> 16/06/2021</div></td>
                <td><div class="cell-inner"> 17/06/2021</div></td>
                <td><div class="cell-inner"> Caténaire</div></td>
                <td><div class="cell-inner"> ISOLE</div></td>
                <td><div class="cell-inner"> Continue</div></td>
              </tr>
              <tr>
                <td><div class="cell-inner text"> VE200200</div></td>
                <td><div class="cell-inner"> Protections MICOM P12x</div></td>
                <td><div class="cell-inner"> NVE0000046</div></td>
                <td><div class="cell-inner"> Nanterre</div></td>
                <td><div class="cell-inner"> 21/06/2021</div></td>
                <td><div class="cell-inner"> 23/06/2021</div></td>
                <td><div class="cell-inner"> Caténaire</div></td>
                <td><div class="cell-inner"> ISOLE</div></td>
                <td><div class="cell-inner"> Continue</div></td>
              </tr>
              <tr>
                <td><div class="cell-inner text"> VE200200</div></td>
                <td><div class="cell-inner"> Protections MICOM P12x</div></td>
                <td><div class="cell-inner"> NVE0000047</div></td>
                <td><div class="cell-inner"> Bègles</div></td>
                <td><div class="cell-inner"> 23/06/2021</div></td>
                <td><div class="cell-inner"> 25/06/2021</div></td>
                <td><div class="cell-inner"> Caténaire</div></td>
                <td><div class="cell-inner"> ISOLE</div></td>
                <td><div class="cell-inner"> Continue</div></td>
              </tr>
              <tr>
                <td><div class="cell-inner text"> VE200500</div></td>
                <td><div class="cell-inner"> DDL numérique 800 ICE</div></td>
                <td><div class="cell-inner"> NVE0000020</div></td>
                <td><div class="cell-inner"> Nanterre</div></td>
                <td><div class="cell-inner"> 29/06/2021</div></td>
                <td><div class="cell-inner"> 29/06/2021</div></td>
                <td><div class="cell-inner"> Caténaire</div></td>
                <td><div class="cell-inner"> ISOLE</div></td>
                <td><div class="cell-inner"> Continue</div></td>
              </tr>
              <tr>
                <td><div class="cell-inner text"> VE800100</div></td>
                <td><div class="cell-inner"> EALE - Systéme de conduite locale et d'automatisme ACS21 (SCLA/PA)</div></td>
                <td><div class="cell-inner"> NVE0000072</div></td>
                <td><div class="cell-inner"> Saint-Priest</div></td>
                <td><div class="cell-inner"> 21/06/2021</div></td>
                <td><div class="cell-inner"> 25/06/2021</div></td>
                <td><div class="cell-inner"> Caténaire</div></td>
                <td><div class="cell-inner"> ISOLE</div></td>
                <td><div class="cell-inner"> Continue</div></td>
              </tr>
              <tr>
                <td><div class="cell-inner text"> VSC10500TS</div></td>
                <td><div class="cell-inner"> Agent desserte, chef de la manoeuvre Convoi du GI TS</div></td>
                <td><div class="cell-inner"> NVS0000369</div></td>
                <td><div class="cell-inner"> Bègles</div></td>
                <td><div class="cell-inner"> 14/06/2021</div></td>
                <td><div class="cell-inner"> 25/06/2021</div></td>
                <td><div class="cell-inner"> Produit Train</div></td>
                <td><div class="cell-inner"> ISOLE</div></td>
                <td><div class="cell-inner"> Continue</div></td>
              </tr>
              <tr>
                <td><div class="cell-inner text"> VM120000 </div></td>
                <td><div class="cell-inner"> Poste MU 45</div></td>
                <td><div class="cell-inner"> NVM0000070</div></td>
                <td><div class="cell-inner"> Saint-Priest</div></td>
                <td><div class="cell-inner"> 07/06/2021</div></td>
                <td><div class="cell-inner"> 11/06/2021</div></td>
                <td><div class="cell-inner"> Signalisation</div></td>
                <td><div class="cell-inner"> ISOLE</div></td>
                <td><div class="cell-inner"> Continue</div></td>
              </tr>
              <tr>
                <td><div class="cell-inner text"> VVI12000TS </div></td>
                <td><div class="cell-inner"> Agent PN en travaux TS</div></td>
                <td><div class="cell-inner"> NVV0000857</div></td>
                <td><div class="cell-inner"> Saint-Priest</div></td>
                <td><div class="cell-inner"> 15/06/2021</div></td>
                <td><div class="cell-inner"> 16/06/2021</div></td>
                <td><div class="cell-inner"> Voie</div></td>
                <td><div class="cell-inner"> ISOLE</div></td>
                <td><div class="cell-inner"> Initiale</div></td>
              </tr>
              <tr>
                <td><div class="cell-inner text"> VVI12000TS </div></td>
                <td><div class="cell-inner"> Agent PN en travaux TS</div></td>
                <td><div class="cell-inner"> NVV0000861</div></td>
                <td><div class="cell-inner"> Bègles</div></td>
                <td><div class="cell-inner"> 15/06/2021</div></td>
                <td><div class="cell-inner"> 16/06/2021</div></td>
                <td><div class="cell-inner"> Voie</div></td>
                <td><div class="cell-inner"> ISOLE</div></td>
                <td><div class="cell-inner"> Initiale</div></td>
              </tr>
              <tr>
                <td><div class="cell-inner text"> VVTESC01 </div></td>
                <td><div class="cell-inner"> TES C - Sans mobile travaux</div></td>
                <td><div class="cell-inner"> NVV0000175</div></td>
                <td><div class="cell-inner"> Nanterre</div></td>
                <td><div class="cell-inner"> 07/06/2021</div></td>
                <td><div class="cell-inner"> 10/06/2021</div></td>
                <td><div class="cell-inner"> Voie</div></td>
                <td><div class="cell-inner"> ISOLE</div></td>
                <td><div class="cell-inner"> Initiale</div></td>
              </tr>
              <tr>
                <td><div class="cell-inner text"> VVTESC02 </div></td>
                <td><div class="cell-inner"> TES C - Avec LAM</div></td>
                <td><div class="cell-inner"> NVV0000070</div></td>
                <td><div class="cell-inner"> Nanterre</div></td>
                <td><div class="cell-inner"> 21/06/2021</div></td>
                <td><div class="cell-inner"> 23/06/2021</div></td>
                <td><div class="cell-inner"> Voie</div></td>
                <td><div class="cell-inner"> ISOLE</div></td>
                <td><div class="cell-inner"> Initiale</div></td>
              </tr>
              <tr>
                <td><div class="cell-inner text"> VVTESC03  </div></td>
                <td><div class="cell-inner"> TES C - Avec TTx</div></td>
                <td><div class="cell-inner"> NVV0000034</div></td>
                <td><div class="cell-inner"> Bègles</div></td>
                <td><div class="cell-inner"> 21/06/2021</div></td>
                <td><div class="cell-inner"> 30/06/2021</div></td>
                <td><div class="cell-inner"> Voie</div></td>
                <td><div class="cell-inner"> ISOLE</div></td>
                <td><div class="cell-inner"> Initiale</div></td>
              </tr>
              <tr>
                <td><div class="cell-inner text"> VVTESM03  </div></td>
                <td><div class="cell-inner"> TES M Annonceur Sentinelle ASP - LC</div></td>
                <td><div class="cell-inner"> NVD0001595</div></td>
                <td><div class="cell-inner"> Nanterre</div></td>
                <td><div class="cell-inner"> 14/06/2021</div></td>
                <td><div class="cell-inner"> 16/06/2021</div></td>
                <td><div class="cell-inner"> Voie</div></td>
                <td><div class="cell-inner"> ISOLE</div></td>
                <td><div class="cell-inner"> Initiale</div></td>
              </tr>
              <tr>
                <td><div class="cell-inner text"> VPRCOACOPE  </div></td>
                <td><div class="cell-inner"> Module Coactivité (RSNCF/RSO) opérateurs MT</div></td>
                <td><div class="cell-inner"> NVP0000953</div></td>
                <td><div class="cell-inner"> Saint-Priest</div></td>
                <td><div class="cell-inner"> 16/06/2021</div></td>
                <td><div class="cell-inner"> 17/06/2021</div></td>
                <td><div class="cell-inner"> Voie</div></td>
                <td><div class="cell-inner"> ISOLE</div></td>
                <td><div class="cell-inner"> Continue</div></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div id="footercofo5"></div>
    <script src="bootstrap-sncf.metier.v4.3.1-r5/bootstrap-sncf.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js" ></script>
    <script src="https://cdn.datatables.net/buttons/1.6.5/js/dataTables.buttons.min.js" ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js" ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js" ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js" ></script>
    <script src="https://cdn.datatables.net/buttons/1.6.5/js/buttons.html5.min.js" ></script>
    <script src="https://cdn.datatables.net/searchpanes/1.2.1/js/dataTables.searchPanes.min.js"></script>
    <script src="https://cdn.datatables.net/select/1.3.1/js/dataTables.select.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/series-label.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>
    <script src="https://code.highcharts.com/modules/export-data.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
    <script>
       $(function(){
        $("#includedContentCofo5").load("navcofo.html"); 
        $("#footercofo5").load("footer.html"); 
      });

      $(document).ready(function() {
      var table = $('#cofoall').DataTable({
        dom: 'BPfrtip',
        "pagingType": "full_numbers",
        columnDefs:[
            {
                searchPanes:{
                    show: true, // It can be true/false
                },
                targets: [0,2,3,4,5,6,7], // Index of columns (starting at 0) that you want show/hide                
            },
            {
      orderable: false,
      targets: "no-sort"
    }
        ],
        lengthMenu: [
          [10, 25, 50, 100],
          [ '10 ', '25 ', '50 ', '100 ']
        ],
        buttons: [
          //'searchPanes',
            {
              extend : 'pageLength',
              className : 'btn btn-success mt-1',
              
            },
            {
              text: 'Filtres avancés',
              className: 'btn btn-primary',
              action: function (e, dt, node, config) {
                  $(".dtsp-panesContainer").toggle()
              },
              init: function( api, node, config) {
                  $(node).removeClass('dt-button')
              }
            },
            {
              extend : 'copyHtml5',
              text : 'Copier',
              copyTitle: 'Données copiées',
              className : 'btn btn-warning',
              exportOptions: {
                columns: [ 0,1,2,3,4,5,6,7,8]
                },
                init: function( api, node, config) {
                  $(node).removeClass('dt-button buttons-copy buttons-html5')
              }
            },
            {
              extend : 'excelHtml5',
              className : 'btn btn-success',
              exportOptions: {
                columns: [ 0,1,2,3,4,5,6,7,8]
                },
                init: function( api, node, config) {
                  $(node).removeClass('dt-button buttons-excel buttons-html5')
              }
            },
            {
              extend : 'csvHtml5',
              className : 'btn btn-success',
              exportOptions: {
                columns: [ 0,1,2,3,4,5,6,7,8]
                },
                init: function( api, node, config) {
                  $(node).removeClass('dt-button buttons-csv buttons-html5')
                }

            },
            {
                extend: 'pdfHtml5',
                orientation: 'landscape',
                pageSize : 'LEGAL',
                exportOptions: {
                  columns: [ 0,1,2,3,4,5,6,7,8]
                },
                className : 'btn btn-primary',
                init: function( api, node, config) {
                  $(node).removeClass('dt-button buttons-pdf buttons-html5')
                }
            }
        ],
        "language": {
            "url": "//cdn.datatables.net/plug-ins/1.10.22/i18n/French.json",
            searchPanes: {
                collapse: "Afficher les filtres",
                title : {
                  _: '%d - Filtres sélectionnés',
                  0 : 'Aucun filtres sélectionnés'
                },
                clearMessage : 'Réinitialisé'
            },
            buttons : {
              pageLength: {
                _: "%d éléments par page",
                '-1': "Tout afficher"
              },
              copy: 'Copy',
            copySuccess: {
                1: "Copie d'une ligne",
                _: "Copie de %d lignes"
            },
            copyTitle: 'Données copiées',
            copyKeys: 'Press <i>ctrl</i> or <i>\u2318</i> + <i>C</i> to copy the table data<br>to your system clipboard.<br><br>To cancel, click this message or press escape.'

            ,
       
            },
        }
      });
      $('#cofoall thead th').addClass('text-white');
      var chart = Highcharts.chart('container', {
          chart: {
              type: 'pie',
          },
          title: {
              text: 'Lieu',
          },
          series: [
              {
                  data: chartData(table,3),
              },
          ],
      });

      var chart2 = Highcharts.chart('container2', {
          chart: {
              type: 'pie',
          },
          title: {
              text: 'Typologie',
          },
          series: [
              {
                  data: chartData(table,8),
              },
          ],
      });

    // On each draw, update the data in the chart
    table.on('draw', function () {
        chart.series[0].setData(chartData(table,3));
        chart.series[0].setName("Total");
        chart2.series[0].setData(chartData(table,8));
        chart2.series[0].setName("Total");

    });
      })

      function chartData(table,column) {
    var counts = {};
 
    // Count the number of entries for each position
    table
        .column(column, { search: 'applied' })
        .data()
        .each(function (val) {
            if (counts[val]) {
                counts[val] += 1;
            } else {
                counts[val] = 1;
            }
        });
 
    // And map it to the format highcharts uses
    return $.map(counts, function (val, key) {
        return {
            name: key,
            y: val,
        };
    });
}

function showGraph() {
  $("#graph").toggle()
}

    </script>
</body>
</html>